% Copyright 2014 by Remus Mihail Prunescu

% LaTeX Support Group 2014
% DTU Official Presentation

\mode<presentation>

\setbeamercolor*{framecounter in head/foot}{parent=palette tertiary}
\setbeamercolor*{department in head/foot}{parent=palette tertiary}
\setbeamercolor*{title in head/foot}{parent=palette tertiary}
\setbeamercolor*{date in head/foot}{parent=palette tertiary}

%\setbeamertemplate{navigation bars}{mini frame}

% No navigation symbols
\setbeamertemplate{navigation symbols}{
} 

% Definiert die headline
\setbeamertemplate{headline}
{ 
	\vspace{\dimDTULogoYOffset}
	\hbox{
		\begin{beamercolorbox}[wd=.85\paperwidth,left]{section in head/foot}
	    %\rule{0.85\paperwidth}{1pt}
	    %Vertikaler Abstand
	    \vskip5pt
	    %FÃ¼gt die Standard-Navi ein (miniframes)
	    \insertnavigation{0.85\paperwidth}
	    \vskip5pt
	    %\rule{0.85\paperwidth}{0.5pt}
	    \vskip5pt % same height of the example provided, but IMHO is too much
	    %\rule{0.85\paperwidth}{1pt}
		\end{beamercolorbox} 
		\begin{beamercolorbox}[wd=0.15\paperwidth, right]{section in head/foot}
			\ifdefstring{\bDTUWhiteFrame}{true}
			{
				%\insertFrameDTUWhiteLogo
				\insertDTUWhiteLogo\makebox[\dimDTULogoWidth][]{}
			}
			{
				\ifdefstring{\bInTitle}{true}
				{
					%\insertTitleDTULogo
					\insertDTULogo\makebox[\dimDTULogoWidth][]{}
				}
				{
					%\insertFrameDTULogo
					\insertDTULogo\makebox[\dimDTULogoWidth][]{}
				}
			}
		\end{beamercolorbox} 
	}
	%\includegraphics[width=0.15\paperwidth]{logopolito} % test logo
	%\begin{beamercolorbox}[wd=.85\paperwidth,right]{section in head/foot}
}

% definition of the frametitle
\setbeamertemplate{frametitle}
{
	%\hskip-1pt
	%\vskip-24pt % to shift up the frametitle
	\hbox{ 
	 \begin{beamercolorbox}[wd=0.005\textwidth,left]{} % left shift
	 \end{beamercolorbox} 
	 \begin{beamercolorbox}[wd=\paperwidth,left]{}
	 \insertframetitle
	\end{beamercolorbox} 
	}
	\vspace{\dimAfterFrameTitleOffset}
}



% Header
%\setbeamertemplate{headline}
%{
%	\ifdefstring{\bDTUWhiteFrame}{true}
%	{
%		\insertFrameDTUWhiteLogo
%	}
%	{
%		\ifdefstring{\bInTitle}{true}
%		{
%			\insertTitleDTULogo
%		}
%		{
%			\insertFrameDTULogo
%		}
%	}
%}

% Footer
\setbeamertemplate{footline}
{
	\ifdefstring{\bInTitle}{true}
	{
		\vspace{-0.35\paperheight}
		\begin{beamercolorbox}[wd=\paperwidth]{title bottom}
			\vbox{%
				\makebox[0pt][l]{\hspace{\dimDTUDepLogoXOffset}\insertdepartmentlogoA}%
				\vbox{%
					\hspace{\dimDTUFriseXOffset}%
					\makebox[0pt][l]{\insertDTUFrise}%
					\vspace{\dimDTUDepFriseOffset}%
				}%
			}%
			\vspace{\dimDTUFriseYOffset}
		\end{beamercolorbox}
		\global\def\bInTitle{false}
	}
	{
		\ifdefstring{\bDTUWhiteFrame}{true}
		{
		}
		{ %
			\hbox{ %
				\hspace{\dimTextLeftMargin}\hspace{-1.5pt}\insertframenumber %
				\setlength{\widthframenumber}{2em + \widthof{\insertframenumber}} %
				\setlength{\widthdepartment}{1em + \widthof{\insertdepartmentandinstitute}} %
				\setlength{\widthdate}{1em + \widthof{00 00 0000}} %
				\setlength{\widthtitle}{\textwidth-\widthframenumber-\widthdepartment-\widthdate-\dimTextLeftMargin-\dimTextLeftMargin} %
				%\parbox[t]{\widthframenumber}{\insertframenumber} %
				\parbox[t]{\widthdepartment}{\insertdepartmentandinstitute} %
				\parbox[t]{\widthtitle}{\raggedleft\insertshorttitleinfooter} %
				\parbox[t]{\widthdate}{\raggedleft\DTUDateFormat\insertdate} %
				\vspace{\dimFootlineYOffset} %
			}
		}
	}
}

% Position the frame title so that it would get into the headline
%\setbeamertemplate{frametitle}
%{
%	\vspace{\dimPlaceTitleInHeader}
%	\ifdefstring{\inShowSection}{true}
%	{
%			\usebeamerfont{section title}\color{black!20}%
%			\ifnumcomp{\thesection}{=}{0}{%
%				\ \par%
%			}
%			{%
%				%\insertsection\par
%			}
%	}
%	{
%		\vspace{\dimFrameTitleOffset}
%	}
%	\vspace{-1pt}\usebeamerfont{frametitle}%
%	\ifdefstring{\bDTUWhiteFrame}{true}{\color{white}}{\color{black}}%
%	%\insertframetitle
%	\vspace{\dimAfterFrameTitleOffset}
%}

\mode
<all>
